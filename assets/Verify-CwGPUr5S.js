import{r as o,u as F,j as e,H as C,I as P,k as j,J as u,K,L as S,M as D,b as E,a as I,N as V,f as L,O as T}from"./index-DMEyuVsF.js";import{c as B}from"./createVerificationHash-pndCHIzv.js";import"./formatKeys-Blap60VP.js";function H(){const[m,v]=o.useState(!1),[h,s]=o.useState(null),[g,b]=o.useState(null),[a,y]=o.useState(0),p=F(),c=o.useRef(null),n=o.useRef(null),d=o.useRef(null),N=async t=>{t.preventDefault();try{s(null),b(null),v(!0);const r=c.current.value,i=n.current.value,f=d.current.value;if(!r?.trim())return s("Public key is required");if(!i?.trim())return s("Private key is required");if(!f?.trim())return s("Signature is required");const w=await B(r,i);(await V(w,f)).valid?b("Signature verified successfully ✅"):s("Invalid signature ❌")}catch(r){console.error(r),s(r?.response?.data?.message||"Failed to verify document authenticity.")}finally{v(!1)}},x=async t=>{try{const r=await navigator.clipboard.readText();if(t.current){t.current.value=r;const i=new Event("input",{bubbles:!0});t.current.dispatchEvent(i)}}catch(r){console.error("Failed to read clipboard contents: ",r),t.current&&(t.current.focus(),document.execCommand("paste"))}},k=["/public.jpg","/private.jpg","/signature.jpg"],l=[{title:"Public Key",description:"Your public key is included in the generated PDF under the 'Keys' section.",icon:e.jsx(j,{className:"text-[var(--color-text-light)]"}),btnBgColor:"--color-secondary"},{title:"Private Key",description:"Your private key is stored securely inside the generated PDF document.",icon:e.jsx(L,{className:"text-[var(--color-error)]"}),btnBgColor:"--color-error"},{title:"Signature",description:"The signature can be found at the end of the generated PDF along with the verification details.",icon:e.jsx(T,{className:"text-[var(--color-info)]"}),btnBgColor:"--color-info"}];return e.jsxs("main",{className:"min-h-screen relative grass-dark text-[var(--color-text)] p-4 md:p-6 lg:p-8",children:[e.jsx(C,{}),e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("header",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-[var(--color-main)] mb-2",children:"Document Verification Portal"}),e.jsx("p",{className:"text-[var(--color-text-light)] max-w-2xl mx-auto",children:"Verify the authenticity of your documents using your security keys"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8",children:[e.jsxs("section",{className:"p-4 md:p-6 rounded-xl shadow-lg border border-[var(--color-border)]",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(P,{className:"text-[var(--color-main)]"}),"Where to Find Your Keys"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-[var(--color-text-light)] mb-4",children:"You can retrieve your verification keys from the following locations in your document:"}),e.jsx("div",{className:"flex space-x-2 mb-4",children:l.map((t,r)=>e.jsx("button",{onClick:()=>y(r),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${a===r?`bg-[var(${t.btnBgColor})] text-[var(--color-text-inverse)]`:"bg-[var(--color-bg)] text-[var(--color-text-light)] hover:bg-[var(--color-border)]"}`,children:t.title},r))}),e.jsxs("div",{className:"p-4 rounded-lg mb-4",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"text-2xl",children:l[a].icon}),e.jsx("h3",{className:"text-lg font-semibold",children:l[a].title})]}),e.jsx("p",{className:"text-[var(--color-text-light)] text-sm",children:l[a].description})]}),e.jsx("div",{className:"rounded-lg overflow-hidden border border-[var(--color-border)]",children:e.jsx("img",{src:k[a],alt:`Location of ${l[a].title}`,className:"w-full h-auto"})})]})]}),e.jsxs("section",{className:"p-4 md:p-6 rounded-xl shadow-lg border border-[var(--color-border)]",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-[var(--color-main)]",children:[e.jsx(j,{})," Verify Document Authenticity"]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"publicKey",className:"block text-sm font-medium mb-1 text-[var(--color-text-light)]",children:"Public Key"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"publicKey",ref:c,placeholder:"Enter your public key",className:"w-full p-3 pr-10 rounded-lg border border-[var(--color-border)] text-[var(--color-text)] placeholder-[var(--color-text-light)] focus:outline-none focus:ring-2 focus:ring-[var(--color-main)]"}),e.jsx("button",{type:"button",onClick:()=>x(c),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1 text-[var(--color-text-light)] hover:text-[var(--color-main)] transition-colors",title:"Paste from clipboard",children:e.jsx(u,{})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"privateKey",className:"block text-sm font-medium mb-1 text-[var(--color-text-light)]",children:"Private Key"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"privateKey",ref:n,placeholder:"Enter your private key",className:"w-full p-3 pr-10 rounded-lg border border-[var(--color-border)] text-[var(--color-text)] placeholder-[var(--color-text-light)] focus:outline-none focus:ring-2 focus:ring-[var(--color-main)]"}),e.jsx("button",{type:"button",onClick:()=>x(n),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1 text-[var(--color-text-light)] hover:text-[var(--color-main)] transition-colors",title:"Paste from clipboard",children:e.jsx(u,{})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"signature",className:"block text-sm font-medium mb-1 text-[var(--color-text-light)]",children:"Signature"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"signature",ref:d,placeholder:"Enter the document signature",className:"w-full p-3 pr-10 rounded-lg border border-[var(--color-border)] text-[var(--color-text)] placeholder-[var(--color-text-light)] focus:outline-none focus:ring-2 focus:ring-[var(--color-main)]"}),e.jsx("button",{type:"button",onClick:()=>x(d),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1 text-[var(--color-text-light)] hover:text-[var(--color-main)] transition-colors",title:"Paste from clipboard",children:e.jsx(u,{})})]})]}),h&&e.jsxs("div",{role:"alert",className:"flex items-center gap-2 text-[var(--color-error)] bg-[var(--color-error-bg)] p-3 rounded-lg text-sm",children:[e.jsx(K,{className:"flex-shrink-0"}),e.jsx("span",{children:h})]}),g&&e.jsxs("div",{role:"status",className:"flex items-center gap-2 text-[var(--color-success)] bg-[var(--color-success-bg)] p-3 rounded-lg text-sm",children:[e.jsx(S,{className:"flex-shrink-0"}),e.jsx("span",{children:g})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:m,className:"w-full py-3 rounded-lg font-semibold transition-colors bg-[var(--color-main)] text-[var(--color-text-inverse)] hover:bg-[var(--color-main-hover)] disabled:opacity-50 flex items-center justify-center gap-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"animate-spin h-5 w-5 text-white"}),"Verifying..."]}):"Verify Document"})})]})]})]}),e.jsxs("div",{className:"mt-8 p-4 md:p-6 rounded-xl shadow-lg border border-[var(--color-border)] text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-[var(--color-main)]",children:"Ready to Continue?"}),e.jsx("p",{className:"text-[var(--color-text-light)] text-sm mb-4",children:"To access your keys and verify documents, please log in to your account or create a new one if you haven't yet."}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs("button",{onClick:()=>p("/login"),className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-colors bg-[var(--color-main)] text-[var(--color-text-inverse)] hover:bg-[var(--color-main-hover)]",children:[e.jsx(E,{})," Log In"]}),e.jsxs("button",{onClick:()=>p("/register"),className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-colors bg-[var(--color-secondary)] text-[var(--color-text-inverse)] hover:bg-[var(--color-secondary-hover)]",children:[e.jsx(I,{})," Sign Up"]})]})]})]})]})}export{H as default};
