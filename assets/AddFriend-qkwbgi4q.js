const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AddFriendInput-BL4ydbP4.js","assets/index-DMEyuVsF.js","assets/index-Dv6sn459.css"])))=>i.map(i=>d[i]);
import{r as t,Q as j,u as N,j as e,a as x,M as w,_ as S}from"./index-DMEyuVsF.js";import{o as P,N as E}from"./Dashboard-pICFqHWu.js";import{f as _}from"./formatKeys-Blap60VP.js";const F=t.lazy(()=>S(()=>import("./AddFriendInput-BL4ydbP4.js"),__vite__mapDeps([0,1,2])));function k(){const[m,l]=t.useState(""),[g,a]=t.useState(""),[f,r]=t.useState(null),[d,u]=t.useState(!1),{key:i}=j(),h=N(),p=s=>s?.trim().startsWith("-----BEGIN");t.useEffect(()=>{i&&c({raw:i})},[i]);const c=async({raw:s}={})=>{const o=s?.trim()||m?.trim();if(!o)return;const b=p(o)?{receiverPublicKey:_(o)}:{receiverId:o};u(!0),a(""),r(null);try{const n=await P(b);a(n.message),r(n.success)}catch(n){a(n.response?.data?.message||"Something went wrong"),r(!1)}finally{u(!1),h("/dashboard",{replace:!0}),l("")}},v=s=>{a(""),r(null),l(s.target.value)},y=s=>{s.key==="Enter"&&c()};return e.jsxs("div",{className:"p-4 sm:p-6 rounded-xl sm:rounded-2xl shadow-md sm:shadow-lg",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-bold text-[var(--color-text)] mb-3 sm:mb-4 flex items-center",children:[e.jsx(x,{className:"mr-2 sm:mr-3 text-[var(--color-main)]"}),"Add New Friend"]}),e.jsx(E,{message:g,success:f,onClear:()=>{a(""),r(null)}}),e.jsxs("div",{className:"flex flex-col gap-2 sm:gap-3",children:[e.jsx(F,{handleInputChange:v,handleKeyPress:y,publicKey:m,setPublicKey:l}),e.jsx("button",{onClick:()=>c(),disabled:d,className:"w-full sm:w-auto px-4 py-2.5 sm:px-5 sm:py-3 bg-gradient-to-r from-[var(--color-main)] to-[var(--color-main-hover)] text-[var(--color-text-inverse)] font-medium rounded-lg sm:rounded-xl hover:from-[var(--color-main-hover)] hover:to-[var(--color-main-light)] disabled:opacity-70 disabled:cursor-not-allowed transition-all flex items-center justify-center shadow-sm sm:shadow-lg shadow-[var(--color-main)]/10 text-sm sm:text-base",children:d?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"animate-spin mr-2",size:16}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"mr-2",size:16}),"Send Request"]})})]}),e.jsx("p",{className:"text-xs text-[var(--color-text-light)] mt-2 sm:mt-3",children:"Enter your friend's public key or scan the QR/link to send a friend request"})]})}export{k as default};
