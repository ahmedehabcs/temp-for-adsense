const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/createKeysPdf-CLIW3PJq.js","assets/index-yMz8dPk9.js","assets/index-Dv6sn459.css"])))=>i.map(i=>d[i]);
import{j as e,h as j,i as K,r as i,u as $,F as y,k as w,c as F,f as R,_ as T,l as I,g as L,m as U,s as _}from"./index-yMz8dPk9.js";import{I as D}from"./index-CIxgg976.js";import{c as E}from"./createVerificationHash-pndCHIzv.js";import"./formatKeys-Blap60VP.js";function f({icon:r,iconColor:t,title:s,subtitle:d,label:o,keyValue:l,copied:a,onCopy:c,textColor:n}){return e.jsxs("article",{className:"rounded-xl p-6 bg-[var(--color-surface)]/80 backdrop-blur border border-[var(--color-border)] hover:shadow-xl transition-transform hover:scale-[1.01]",children:[e.jsxs("header",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`w-10 h-10 flex items-center justify-center rounded-full ${t}/20`,children:r}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-[var(--color-text)]",children:s}),e.jsx("p",{className:`text-xs ${n}`,children:d})]})]}),e.jsxs("div",{className:"rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`text-xs uppercase tracking-wide ${n}`,children:o}),e.jsxs("button",{onClick:c,className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm transition ${a?"bg-[var(--color-success-bg)] text-[var(--color-success)]":`${t}/20 ${n} hover:${t}/30`}`,children:[a?e.jsx(j,{size:14}):e.jsx(K,{size:14}),a?"Copied!":"Copy"]})]}),e.jsx("div",{className:"bg-[var(--color-bg)] rounded-lg p-3 mb-2",children:e.jsx("input",{type:"text",value:l,readOnly:!0,"aria-label":s,className:"w-full font-mono text-xs md:text-sm text-[var(--color-text)] bg-transparent outline-none break-all leading-relaxed"})})]})]})}function g({title:r,description:t,buttonText:s,buttonIcon:d,onClick:o,bgClasses:l,textColor:a="text-[var(--color-text)]",btnClasses:c}){return e.jsxs("article",{className:`rounded-xl p-6 ${l} hover:shadow-xl transition`,children:[e.jsx("h3",{className:`font-semibold ${a} mb-2`,children:r}),e.jsx("p",{className:"text-sm text-[var(--color-text-light)] mb-4",children:t}),e.jsxs("button",{onClick:o,className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg transition hover:shadow-lg hover:scale-[1.02] ${c}`,children:[d,s]})]})}function z({publicKey:r,privateKey:t,setShowPopup:s}){const[d,o]=i.useState(!1),[l,a]=i.useState(!1),[c,n]=i.useState(!1),x=i.useRef(null),m=$(),v=(u,h)=>{navigator.clipboard.writeText(h),x.current&&clearTimeout(x.current),u==="public"?(o(!0),x.current=setTimeout(()=>o(!1),2e3)):(a(!0),x.current=setTimeout(()=>a(!1),2e3))},N=()=>{s(!1),m("/login")},k=async()=>{try{n(!0);const{createKeysPdf:u}=await T(async()=>{const{createKeysPdf:P}=await import("./createKeysPdf-CLIW3PJq.js");return{createKeysPdf:P}},__vite__mapDeps([0,1,2])),h=await E(r,t),C=await I(h),S=await u(r,t,C.signature),p=URL.createObjectURL(S),b=document.createElement("a");b.href=p,b.download="keys.pdf",b.click(),URL.revokeObjectURL(p)}catch(u){console.error(u)}finally{n(!1)}};return e.jsx("main",{className:"py-8",children:e.jsxs("section",{className:"w-full",children:[e.jsxs("header",{className:"text-center mb-10",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-[var(--color-main)] to-[var(--color-main-light)] flex items-center justify-center text-white shadow-lg",children:e.jsx(y,{size:32})}),e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-[var(--color-text)]",children:"Your Security Keys"}),e.jsx("p",{className:"mt-2 text-sm md:text-base text-[var(--color-text-light)] max-w-2xl mx-auto",children:"Save both keys securely. This is your only chance to back them up before proceeding."})]}),e.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsx(f,{icon:e.jsx(w,{className:"text-[var(--color-info)]"}),iconColor:"bg-[var(--color-info)]",title:"Public Key",subtitle:"Share this key freely!",label:"Share safely",keyValue:r,copied:d,onCopy:()=>v("public",r),textColor:"text-[var(--color-info)]"}),e.jsx(f,{icon:e.jsx(F,{className:"text-[var(--color-warning)]"}),iconColor:"bg-[var(--color-warning)]",title:"Private Key",subtitle:"Never share this key. Store it securely offline.",label:"Top secret",keyValue:t,copied:l,onCopy:()=>v("private",t),textColor:"text-[var(--color-warning)]"})]}),e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(g,{title:"Download Backup",description:"Save both keys in a secure file for offline storage.",buttonText:`${c?"Generating...":"Download File"}`,buttonIcon:e.jsx(R,{size:18}),onClick:k,bgClasses:"bg-gradient-to-r from-[var(--color-main)]/20 to-[var(--color-secondary)]/20",btnClasses:"bg-gradient-to-r from-[var(--color-main)] to-[var(--color-secondary)] text-white"}),e.jsx(g,{title:"Ready to Continue",description:"They cannot be recovered if lost.",buttonText:"I've Saved My Keys",buttonIcon:e.jsx(j,{}),onClick:N,bgClasses:"bg-[var(--color-success-bg)]/50",textColor:"text-[var(--color-success)]",btnClasses:"bg-[var(--color-success)] text-white"})]}),e.jsx("footer",{className:"text-center mt-6",children:e.jsx("p",{className:"text-md text-[var(--color-text-light)]",children:"⚠️ Keys are generated once and cannot be recovered. Store them securely."})})]})})}function H(){const[r,t]=i.useState(null),[s,d]=i.useState(null),[o,l]=i.useState(!1),[a,c]=i.useState(!1),n=async x=>{x.preventDefault(),t(null),c(!0);try{const m=await _();d(m.keys),localStorage.setItem("publicKey",m.keys.publicKey),l(!0)}catch(m){t(m?.response?.data?.message||"Something went wrong")}finally{c(!1)}};return e.jsxs("section",{className:"min-h-screen grass-dark flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx(L,{}),!o&&!s&&e.jsx("div",{className:"w-full max-w-lg relative z-10",children:e.jsxs("div",{className:`bg-[var(--color-surface)] rounded-2xl p-6 md:p-8 border border-[var(--color-border)] shadow-2xl transition-all duration-500 ${o?"opacity-0 scale-95 pointer-events-none":"opacity-100 scale-100"}`,children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 md:w-20 md:h-20 rounded-full bg-gradient-to-br from-[var(--color-main)] to-[var(--color-main-heavy)] mb-4 text-white",children:e.jsx(U,{className:"w-8 h-8 md:w-10 md:h-10"})}),e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-[var(--color-text)] mb-2",children:"Join Us Securely"}),e.jsx("p",{className:"text-[var(--color-text-light)] text-sm md:text-base max-w-md mx-auto",children:"Your data is protected with advanced encryption"})]}),r&&e.jsx("div",{className:"mb-6 p-4 bg-[var(--color-error-bg)] rounded-xl border border-[var(--color-error)]/30 flex items-start gap-3 animate-fadeIn",children:e.jsx("div",{children:e.jsx("p",{className:"text-[var(--color-error)]/80 text-xs md:text-sm mt-1 break-words whitespace-pre-wrap",children:r})})}),e.jsx("button",{onClick:n,disabled:a,className:"w-full py-3 md:py-4 rounded-xl bg-gradient-to-r from-[var(--color-main)] to-[var(--color-main-heavy)] text-white font-semibold transition-all duration-300 flex items-center justify-center gap-2 md:gap-3 text-base md:text-lg hover:from-[var(--color-main-hover)] hover:to-[var(--color-main-heavy)] active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed group relative overflow-hidden",children:a?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"animate-spin w-5 h-5 md:w-6 md:h-6"}),e.jsx("span",{children:"Creating account..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity duration-300"}),e.jsx(w,{className:"w-5 h-5 md:w-6 md:h-6"}),e.jsx("span",{children:"Create Account"})]})}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-[var(--color-border)] flex flex-row items-center justify-between gap-4 text-center sm:text-left",children:[e.jsxs("div",{className:"flex items-center justify-center sm:justify-start text-[var(--color-text-light)] text-sm",children:[e.jsx(y,{className:"mr-2 text-[var(--color-main)] w-4 h-4"}),e.jsx("span",{children:"Powered by"})]}),e.jsx("div",{className:"text-[var(--color-text-light)] text-sm",children:e.jsx("span",{className:"font-medium",children:"AhmedEhab"})})]})]})}),o&&s&&e.jsx(z,{keys:s,setShowPopup:l,publicKey:s.publicKey,privateKey:s.privateKey})]})}export{H as default};
